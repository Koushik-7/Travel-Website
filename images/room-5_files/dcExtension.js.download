(async function(){function t(t,e,n,r,i,o,a){try{var s=t[o](a);var c=s.value}catch(t){n(t);return}if(s.done){e(c)}else{Promise.resolve(c).then(r,i)}}function e(e){return function(){var n=this,r=arguments;return new Promise(function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,c,"next",e)}function c(e){t(a,i,o,s,c,"throw",e)}s(undefined)})}}function n(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function r(t,e,n){if(e in t){Object.defineProperty(t,e,{value:n,enumerable:true,configurable:true,writable:true})}else{t[e]=n}return t}function i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var i=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))}i.forEach(function(e){r(t,e,n[e])})}return t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);if(e){r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}n.push.apply(n,r)}return n}function a(t,e){e=e!=null?e:{};if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(e))}else{o(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function s(t){"@swc/helpers - typeof";return t&&typeof Symbol!=="undefined"&&t.constructor===Symbol?"symbol":typeof t}function c(t,e){var n,r,i,o,a={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]};return(o={next:s(0),"throw":s(1),"return":s(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o);function s(t){return function(e){return c([t,e])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=o[0]&2?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;if(r=0,i)o=[o[0]&2,i.value];switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:false};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){a=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(o[0]===6&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}if(i[2])a.ops.pop();a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t];r=0}finally{n=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}var l=function t(){"use strict";n(this,t);this.sessionId=null;this.clientName=null;this.pollingEnabled=!1;this.pollingInterval=1e4;this.featureFlags=[];this.configFlags={};this.baseEndpoints={};this.ip=""};var u=function t(){"use strict";n(this,t)};u.BUBBLES="bubbles",u.CANCELABLE="cancelable",u.VIEW="view",u.DETAIL="detail",u.SCREENX="screenX",u.SCREENY="screenY",u.CLIENTX="clientX",u.CLIENTY="clientY",u.CTRLKEY="ctrlKey",u.ALTKEY="altKey",u.SHIFTKEY="shiftKey",u.METAKEY="metaKey",u.BUTTON="button",u.RELATEDTARGET="relatedTarget",u.PAGEX="pageX",u.PAGEY="pageY";var f=function t(){"use strict";n(this,t)};f.SAFARI="Safari",f.OPERA="Opera",f.CHROME="Chrome",f.IE="Microsoft Internet Explorer",f.EDGE="Edge",f.FIREFOX="Firefox";var d=function t(){"use strict";n(this,t)};d.POST="POST",d.GET="GET";var v=function t(){"use strict";n(this,t)};v.VNEXT_DC_SANDBOX="SANDBOX",v.VNEXT_DC_PRODUCTION="PRODUCTION";var g=function t(){"use strict";n(this,t)};g.VNEXT_DC_REFERRER_KEY="vnext.dc.histories",g.VNEXT_DC_HISTORY_KEY="vnext.dc.referrers",g.VNEXT_DC_ACTIVATE_CACHE_KEY="vnext.dc.activate.cache",g.VNEXT_DC_ACTIVATE_CACHE_KEY_SPLITTER="-:-:-:-:-:-",g.VNEXT_DC_FPJSPRO_LOADED="vnext.dc.fpjspro.loaded",g.VNEXT_DC_FPJSPRO_CALLED="vnext.dc.fpjspro.called",g.VNEXT_DC_NUDATA_LOADED="vnext.dc.nudata.loaded",g.VNEXT_DC_NUDATA_CALLED="vnext.dc.nudata.called",g.VNEXT_DC_DATA_KEY="vnext.dc.data",g.VNEXT_DC_DATA_SENT_KEY="vnext.dc.data.sent",g.VNEXT_DC_ENABLECONSOLE="vnext.dc.enable.console";var p=function t(){"use strict";n(this,t)};p.Fingerprint="fingerprint",p.FingerprintPro="fingerprintPro",p.SocialData="socialData",p.History="history",p.Storages="storages",p.Cookies="cookies",p.UserData="userData",p.UserLocation="userLocation",p.ActivityStream="activityStream",p.UserEvents="userEvents",p.LogData="logData";var h=function t(){"use strict";n(this,t)};h.InitiateV1="/api/v1/transactions/initiate",h.InitiateSandboxV1="/api/v1/transactions/sandbox/initiate",h.InitiateV2="/api/v2/transactions/initiate",h.InitiateSandboxV2="/api/v2/transactions/sandbox/initiate",h.InitiateV3="/api/v3/transactions/initiate",h.InitiateSandboxV3="/api/v3/transactions/sandbox/initiate";var D=function t(e){"use strict";n(this,t);this.createdDate=e||""};var E=function t(){"use strict";n(this,t)};E.GATEWAY="https://js.dc.apac.vesta.io",E.BROWSER_LOCATION_API="https://api.ipify.org?format=json",E.USE_BROWSER_LOCATION_API="undefined",E.VNEXT_DC_GEOIP_URL="https://json.geoiplookup.io/json/",E.STORAGE_SIZE_LIMIT="50000";var m=function(){var t=e(function(t,e,n){var r,i,o,a,s,l,u;return c(this,function(c){switch(c.label){case 0:if(!t)return[2];r=function(t){return new Promise(function(e){return setTimeout(e,t)})},i=n!==null&&n!==void 0?n:4,o=e!==null&&e!==void 0?e:1e3;c.label=1;case 1:c.trys.push([1,9,,10]);return[4,t()];case 2:a=c.sent();if(!(a.status===200))return[3,3];s=Promise.resolve(a);return[3,8];case 3:if(!(i<=0))return[3,4];l=Promise.reject(a);return[3,7];case 4:return[4,r(o)];case 5:c.sent();return[4,m(t,o,i-1)];case 6:l=c.sent();c.label=7;case 7:s=l;c.label=8;case 8:return[2,s];case 9:u=c.sent();return[2,Promise.reject(u)];case 10:return[2]}})});return function e(e,n,r){return t.apply(this,arguments)}}(),w=function(t,e){if(AbortController){var n=new AbortController,r=setTimeout(function(){return n.abort()},15e3);return fetch(t,a(i({},e),{signal:n.signal}))}else return fetch(t,e)};var C={userData:5,activityStream:10,fingerprint:5,socialData:5,fingerprintPro:5,userLocation:5,userEvent:5,history:5,storages:5,accelerometerData:5},S=function(t){if(window.VestaDataCollectorJS.config.featureFlags)return window.VestaDataCollectorJS.config.featureFlags.find(function(e){return e.apiName===t})},_=function(){localStorage.removeItem(g.VNEXT_DC_DATA_KEY),localStorage.removeItem(g.VNEXT_DC_DATA_SENT_KEY)},T=function(){var t=e(function(t,e,n){var i,o,a,s;return c(this,function(n){if((i=S(t))===null||i===void 0?void 0:i.enabled){;a=r({clientName:window.VestaDataCollectorJS.config.clientName,sessionId:window.VestaDataCollectorJS.config.sessionId,dcUrl:((o=window.VestaDataCollectorJS.config.baseEndpoints)===null||o===void 0?void 0:o.baseDcUrl)||"",targetDocumentObject:t},t,e),s=localStorage[g.VNEXT_DC_DATA_KEY]||JSON.stringify(new D);return[2,(s=JSON.parse(s),s.clientName=a.clientName||"",s.sessionId=a.sessionId,s[t]=s[t]||[],s[t].length>=C[t]&&s[t].shift(),s[t].push(e),localStorage[g.VNEXT_DC_DATA_KEY]=JSON.stringify(s),Promise.resolve({status:200}))]}return[2,Promise.resolve({status:202})]})});return function e(e,n,r){return t.apply(this,arguments)}}();var y=function(){var t=e(function(){var t,n,r;return c(this,function(i){switch(i.label){case 0:if(localStorage[g.VNEXT_DC_DATA_SENT_KEY]==="true")return[2,Promise.resolve()];t=localStorage[g.VNEXT_DC_DATA_KEY]||JSON.stringify(new D);t=JSON.parse(t),t.fingerprintpro=[];i.label=1;case 1:i.trys.push([1,3,,4]);return[4,m(/*#__PURE__*/e(function(){var e,n;return c(this,function(r){switch(r.label){case 0:return[4,w("".concat(E.GATEWAY,"/js/dc/send-all"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",TransactionId:(n=window.VestaDataCollectorJS)===null||n===void 0?void 0:(e=n.config)===null||e===void 0?void 0:e.sessionId},body:JSON.stringify(t)})];case 1:return[2,r.sent()]}})}))];case 2:n=i.sent();return[2,(localStorage[g.VNEXT_DC_DATA_SENT_KEY]="true",n)];case 3:r=i.sent();Promise.reject(r);return[3,4];case 4:return[2]}})});return function e(){return t.apply(this,arguments)}}(),b=function(){var t=localStorage[g.VNEXT_DC_DATA_KEY]||"{}";return t=JSON.parse(t),t};var O={loaded:"Vesta DataCollector: Loaded.",init:"Vesta DataCollector initialized with client: ",sandboxMode:"Vesta DataCollector is being initialized on sandbox mode.",noEnvironmentError:"Vesta DataCollector must be activated with an environment type: SANDBOX or PRODUCTION",unauthorized:"Vesta DataCollector authorization denied.",error:"Vesta DataCollector internal server error.",missingFpjsToken:"Vesta DataCollector didn't receive a FingerprintPro token.",fpJsDisabled:"Vesta DataCollector FingerprintPro is disabled for this customer.",fpJsNotLoadedOrAlreadyCalled:"Vesta DataCollector FingerprintPro is not loaded or already called for this specific customer.",dcInactive:"Vesta DataCollector is not configured for this customer.",transactionInitiateError:"Vesta DataCollector: Something went wrong while initiating the transaction.",transactionInitiateNoAuth:"Vesta DataCollector: Provided credentials or access token is invalid.",internal_server_error:"Vesta DataCollector: Internal Server Error",cannotResume:"Vesta DataCollector: Cannot resume session, previous session not found.",cannotCheckout:"Vesta DataCollector: Cannot call checkout, session not found.",alreadyCheckedout:"Vesta DataCollector: Checkout can only be called once per session.",initializeCheckout:"Vesta DataCollector: Finalizing at checkout...",initializeCheckoutWith:"Vesta DataCollector: Finalized at checkout using ",retryCheckout:"Vesta DataCollector: Retrying finalize",enableConsole:"Vesta DataCollector: Console messages enabled in this session",disableConsole:"Vesta DataCollector: Console messages disabled in this session",missingOptions:"Vesta DataCollector: Missing configuration for ChannelPartner!"},N=O;var A=function(){return{log:function(t){sessionStorage[g.VNEXT_DC_ENABLECONSOLE]==="true"&&t()},enable:function(){sessionStorage[g.VNEXT_DC_ENABLECONSOLE]="true",console.log(N.enableConsole)},disable:function(){sessionStorage[g.VNEXT_DC_ENABLECONSOLE]="false",console.log(N.disableConsole)}}},V=A;var I=function(){var t=e(function(){return c(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){var e=document.createElement("script");e.src="".concat(E.GATEWAY,"/js/static/fingerprint.js"),e.onload=function(){t(!0)},document.querySelector("head").appendChild(e)})];case 1:return[2,t.sent()]}})});return function e(){return t.apply(this,arguments)}}(),P=function(){var t=e(function(){var t,e,n,r,i,o,a;return c(this,function(s){switch(s.label){case 0:i=V(),o=(e=window.VestaDataCollectorJS.config)===null||e===void 0?void 0:(t=e.configFlags)===null||t===void 0?void 0:t.fpjsapiToken;if(localStorage[g.VNEXT_DC_FPJSPRO_LOADED]="false",!((r=window.VestaDataCollectorJS.config)===null||r===void 0?void 0:(n=r.configFlags)===null||n===void 0?void 0:n.fppenabled))return[2,(i.log(function(){return console.warn(N.fpJsDisabled)}),Promise.resolve(!1))];if(!o)return[3,2];return[4,new Promise(function(t){var e=document.createElement("script");e.id="vestaDataCollector",e.src="https://fpcdn.io/v3/".concat(o,"/iife.min.js"),e.onload=function(){t(!0)},document.querySelector("head").appendChild(e)})];case 1:a=s.sent();return[2,(localStorage[g.VNEXT_DC_FPJSPRO_LOADED]="true",a)];case 2:return[2,(i.log(function(){return console.warn(N.missingFpjsToken)}),Promise.resolve(!1))];case 3:return[2]}})});return function e(){return t.apply(this,arguments)}}();var R=function(t,e){var n,r,i,o,a,s;var c=V(),l=t.data,u=t.status;return u!==200?(u===401||u===403?c.log(function(){return console.error(N.transactionInitiateNoAuth)}):c.log(function(){return console.error(N.transactionInitiateError)}),Promise.reject(N.transactionInitiateError)):(_(),window.VestaDataCollectorJS.initialize({clientName:e||"",sessionId:l.transactionId},window.VestaDataCollectorJS.nuData.refactorNuDataInitiateResponse(l),(r=l.configuration)===null||r===void 0?void 0:(n=r.dataCollector)===null||n===void 0?void 0:n.featureDetails,null,(o=l.configuration)===null||o===void 0?void 0:(i=o.dataCollector)===null||i===void 0?void 0:i.baseEndPoints),J(l.transactionId,e,window.VestaDataCollectorJS.nuData.refactorNuDataInitiateResponse(l),(s=l.configuration)===null||s===void 0?void 0:(a=s.dataCollector)===null||a===void 0?void 0:a.featureDetails),Promise.resolve(l.transactionId))},L=function(){var t=e(function(t,e){var n,r,i;return c(this,function(o){switch(o.label){case 0:i=V();(!((n=window.VestaDataCollectorJS.config)===null||n===void 0?void 0:n.configFlags)||!((r=window.VestaDataCollectorJS.config)===null||r===void 0?void 0:r.featureFlags))&&i.log(function(){return console.warn(N.dcInactive)}),window.VestaDataCollectorJS.nuData.initializeNuData();return[4,P()];case 1:o.sent();return[4,I()];case 2:o.sent()&&window.VestaDataCollectorJS.v1.getFingerprint(t),window.VestaDataCollectorJS.getHistory(),window.VestaDataCollectorJS.getStorages(),window.VestaDataCollectorJS.getLocation(window.VestaDataCollectorJS.config),i.log(function(){return console.log(N.init,t+" - "+e)}),window.VestaDataCollectorJS.initialized=!0,window.VestaDataCollectorJS.pollStart();return[2]}})});return function e(e,n){return t.apply(this,arguments)}}(),J=function(t,e,n,r){var i=g.VNEXT_DC_ACTIVATE_CACHE_KEY_SPLITTER;localStorage[g.VNEXT_DC_ACTIVATE_CACHE_KEY]=btoa(t+i+e+i+JSON.stringify(n||"{}")+i+JSON.stringify(r||"[]"))},X=function(){window.VestaDataCollectorJS.getHistory(),window.VestaDataCollectorJS.getStorages(),window.VestaDataCollectorJS.getLocation(window.VestaDataCollectorJS.config)},F=function(){window.VestaDataCollectorJS.config.pollingEnabled&&setTimeout(function(){window.VestaDataCollectorJS.collect(),window.VestaDataCollectorJS.pollStart()},window.VestaDataCollectorJS.config.pollingInterval)},k=function(){window.VestaDataCollectorJS.config.pollingEnabled=!1};var j=function(){var t=e(function(){var t,e,n,r;return c(this,function(i){switch(i.label){case 0:t=E.USE_BROWSER_LOCATION_API,e=window.VestaDataCollectorJS.config;if(!(t==="true"&&!e.ip))return[3,5];return[4,fetch(E.BROWSER_LOCATION_API)];case 1:n=i.sent();if(!(n.status===200))return[3,3];return[4,n.json()];case 2:r=i.sent();return[2,(e.ip=(r===null||r===void 0?void 0:r.ip)||"",Promise.resolve((r===null||r===void 0?void 0:r.ip)||""))];case 3:return[2,Promise.resolve("")];case 4:return[3,6];case 5:return[2,Promise.resolve(e.ip||"")];case 6:return[2]}})});return function e(){return t.apply(this,arguments)}}();var x=function(){var t=e(function(t,n,r){var i,o,a,s,l;return c(this,function(u){switch(u.label){case 0:i=E.USE_BROWSER_LOCATION_API;return[4,j()];case 1:o=u.sent();return[4,m(/*#__PURE__*/e(function(){return c(this,function(e){switch(e.label){case 0:return[4,w("".concat(E.GATEWAY,"/js/dc/initiateSession"),{method:d.POST,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({credentials:t,ip:i==="true"?o:"",environment:n||v.VNEXT_DC_PRODUCTION,options:r})})];case 1:return[2,e.sent()]}})}))];case 2:a=u.sent();if(!(a.status===200))return[3,4];l={};return[4,a.json()];case 3:s=(l.data=u.sent(),l.status=a.status,l);return[3,5];case 4:s={status:a.status,data:{}};u.label=5;case 5:return[2,s]}})});return function e(e,n,r){return t.apply(this,arguments)}}(),U=function(){var t=e(function(t,n,r){var i,o,a,s,l;return c(this,function(u){switch(u.label){case 0:i=E.USE_BROWSER_LOCATION_API;return[4,j()];case 1:o=u.sent();return[4,m(/*#__PURE__*/e(function(){return c(this,function(e){switch(e.label){case 0:return[4,w("".concat(E.GATEWAY,"/js/dc/initiateSession"),{method:d.POST,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({credentials:null,ip:i==="true"?o:"",environment:n||v.VNEXT_DC_PRODUCTION,token:t,options:r})})];case 1:return[2,e.sent()]}})}))];case 2:a=u.sent();if(!(a.status===200))return[3,4];l={};return[4,a.json()];case 3:s=(l.data=u.sent(),l.status=a.status,l);return[3,5];case 4:s={status:a.status,data:{}};u.label=5;case 5:return[2,s]}})});return function e(e,n,r){return t.apply(this,arguments)}}(),Y=function(){var t=e(function(t){var e,n;return c(this,function(r){switch(r.label){case 0:return[4,w("".concat(E.GATEWAY,"/js/dc/refreshSession"),{method:d.POST,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({sessionId:t})})];case 1:e=r.sent();if(!(e.status===200))return[3,3];return[4,e.json()];case 2:n=r.sent();return[3,4];case 3:n={};r.label=4;case 4:return[2,n]}})});return function e(e){return t.apply(this,arguments)}}();var K=function(t){var e=V();return!t||t!==v.VNEXT_DC_SANDBOX&&t!==v.VNEXT_DC_PRODUCTION?(e.log(function(){return console.error(N.noEnvironmentError)}),!0):(t===v.VNEXT_DC_SANDBOX&&e.log(function(){return console.log(N.sandboxMode)}),!1)},B=function(t){var e=V();return!t||!(t===null||t===void 0?void 0:t.productReference)?(e.log(function(){return console.error(N.missingOptions)}),!0):!1};function H(){var t=E.VNEXT_DC_GEOIP_URL,n=E.BROWSER_LOCATION_API,r=function(){var t=e(function(){return c(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,e){navigator.geolocation.getCurrentPosition(function(e){t({coords:{accuracy:e.coords.accuracy,altitude:e.coords.altitude,altitudeAccuracy:e.coords.altitudeAccuracy,heading:e.coords.heading,latitude:e.coords.latitude,longitude:e.coords.longitude,speed:e.coords.speed},timestamp:e.timestamp})})})];case 1:return[2,t.sent()]}})});return function e(){return t.apply(this,arguments)}}(),i=function(){var n=e(function(){return c(this,function(e){switch(e.label){case 0:return[4,fetch(t+"/json")];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}})});return function t(){return n.apply(this,arguments)}}(),o=function(){var t=e(function(){var t,e,n,r,i,o,a,s;return c(this,function(c){switch(c.label){case 0:if(!((t=S(p.Storages))===null||t===void 0?void 0:t.enabled))return[2];e=[g.VNEXT_DC_REFERRER_KEY,g.VNEXT_DC_HISTORY_KEY,g.VNEXT_DC_ACTIVATE_CACHE_KEY,g.VNEXT_DC_FPJSPRO_LOADED,g.VNEXT_DC_ACTIVATE_CACHE_KEY_SPLITTER,g.VNEXT_DC_FPJSPRO_CALLED,g.VNEXT_DC_NUDATA_LOADED,g.VNEXT_DC_NUDATA_CALLED,g.VNEXT_DC_DATA_KEY,g.VNEXT_DC_DATA_SENT_KEY],n=document.cookie.split(";").map(function(t){var e=t.split("="),n=(e[0]+"").trim(),r=e.slice(1).join("=");return n?{key:n,value:r}:null}).filter(function(t){return t!==null}),r=Object.keys(localStorage).map(function(t){return e.some(function(e){return e===t})?null:{key:t,value:localStorage[t]}}).filter(function(t){return t!==null}),i=Object.keys(sessionStorage).map(function(t){return e.some(function(e){return e===t})?null:{key:t,value:sessionStorage[t]}}).filter(function(t){return t!==null}),o={localStorage:r,sessionStorage:i,cookies:n},a=E.STORAGE_SIZE_LIMIT?Number(E.STORAGE_SIZE_LIMIT):5e4,s=JSON.stringify(o).length>a?{}:o;window.VestaDataCollectorJS.v1.pushDataHistory(document.URL,s);return[4,T(p.Storages,s)];case 1:c.sent();return[2]}})});return function e(){return t.apply(this,arguments)}}(),a=function(){var t=e(function(){var t,e;return c(this,function(n){switch(n.label){case 0:if(!((t=S(p.History))===null||t===void 0?void 0:t.enabled))return[2];l(),u();e={referrers:localStorage[g.VNEXT_DC_REFERRER_KEY]?JSON.parse(localStorage[g.VNEXT_DC_REFERRER_KEY]):[],history:localStorage[g.VNEXT_DC_HISTORY_KEY]?JSON.parse(localStorage[g.VNEXT_DC_HISTORY_KEY]):[]};window.VestaDataCollectorJS.v1.pushDataHistory(document.URL,e);return[4,T(p.History,e)];case 1:n.sent().status===200&&(localStorage.removeItem(g.VNEXT_DC_REFERRER_KEY),localStorage.removeItem(g.VNEXT_DC_HISTORY_KEY));return[2]}})});return function e(){return t.apply(this,arguments)}}(),s=function(){var t=e(function(){var t,e;return c(this,function(n){switch(n.label){case 0:if(!((t=S(p.UserLocation))===null||t===void 0?void 0:t.enabled))return[2];return[4,j()];case 1:e=n.sent();return[4,T(p.UserLocation,e)];case 2:n.sent();return[2]}})});return function e(){return t.apply(this,arguments)}}(),l=function(){if(document.referrer==="")return;var t=localStorage[g.VNEXT_DC_REFERRER_KEY]?JSON.parse(localStorage[g.VNEXT_DC_REFERRER_KEY]):[];t.push({url:document.referrer,date:new Date}),localStorage[g.VNEXT_DC_REFERRER_KEY]=JSON.stringify(t)},u=function(){var t=localStorage[g.VNEXT_DC_HISTORY_KEY]?JSON.parse(localStorage[g.VNEXT_DC_HISTORY_KEY]):[];t.push({url:window.location.href,date:new Date}),localStorage[g.VNEXT_DC_HISTORY_KEY]=JSON.stringify(t)};return{getStorages:o,getHistory:a,getLocation:s,observeHistory:u,observeReferrers:l}}function W(){var t=window.VestaDataCollectorJS.v1,n=window.VestaDataCollectorJS.events;var r=new Array,i={},o={socialCount:0},a=[],l="",u="",f=new Array,d=new Array,v=!1,h=0,D={};function E(t){for(var e=t,n=Object.values(D),r=Object.keys(D),i=0;i<n.length;i++)if(t==n[i]){e=r[i];break}return e}function m(t,e){e&&e!="null"&&(document.cookie=t+"="+e+";")}function w(t){for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1);if(i.indexOf(e)==0)return i.substring(e.length,i.length)}return""}function C(t){var e=w(t);return!!(e&&e!="null"&&e.length>2)}function _(t){document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function y(t,e){var n=w(t);entries=JSON.parse(n);for(var r=0;r<entries.length;r++)if(entries[r].element==e)return!0;return!1}function b(t){var e=t.id||t.name||t.x_vesta_2342_id;if(e)return e=E(e),e;var n=N(t);return t.x_vesta_2342_id=n,n}function O(t){for(var e=t,n=0;e!=null&&n<200;)e=e.previousElementSibling,n++;return n}function N(t){if(!t)return"dpID";var e=O(t),n=t.parentElement;return N(n)+":"+e}function A(){return navigator.userAgent.indexOf("Firefox")!=-1}function V(){if(!(l.length!==0&&u.length!==0)){var t=navigator.userAgent?navigator.userAgent:"";l=navigator.appName?navigator.appName:"";var e=navigator.appVersion?navigator.appVersion:"";u=""+parseFloat(e);var n=parseInt(e,10);(verOffset=t.indexOf("Opera"))!=-1?(l="Opera",u=t.substring(verOffset+6),(verOffset=t.indexOf("Version"))!=-1&&(u=t.substring(verOffset+8))):(verOffset=t.indexOf("Trident"))!=-1?(l="Microsoft Internet Explorer",u=""+parseInt(t.split("rv:")[1])):(verOffset=t.indexOf("Edge"))!=-1?(l="Edge",u=t.substring(verOffset+5)):(verOffset=t.indexOf("Chrome"))!=-1?(l="Chrome",u=t.substring(verOffset+7)):(verOffset=t.indexOf("Safari"))!=-1?(l="Safari",u=t.substring(verOffset+7),(verOffset=t.indexOf("Version"))!=-1&&(u=t.substring(verOffset+8))):(verOffset=t.indexOf("Firefox"))!=-1?(l="Firefox",u=t.substring(verOffset+8)):(nameOffset=t.lastIndexOf(" ")+1)<(verOffset=t.lastIndexOf("/"))&&(l=t.substring(nameOffset,verOffset),u=t.substring(verOffset+1),l.toLowerCase()==l.toUpperCase()&&(l=navigator.appName?navigator.appName:""))}}var I=function t(){for(var t=window.performance.getEntries(),e="[{",n=0;n<t.length;n++)e+='"responseEnd":"'+t[n].responseEnd+'"',e+=',"responseStart":"'+t[n].responseStart+'"',e+=',"requestStart":"'+t[n].requestStart+'"',e+=',"secureConnectionStart":"'+t[n].secureConnectionStart+'"',e+=',"connectEnd":"'+t[n].connectEnd+'"',e+=',"connectStart":"'+t[n].connectStart+'"',e+=',"domainLookupEnd":"'+t[n].domainLookupEnd+'"',e+=',"domainLookupStart":"'+t[n].domainLookupStart+'"',e+=',"fetchStart":"'+t[n].fetchStart+'"',e+=',"redirectEnd":"'+t[n].redirectEnd+'"',e+=',"redirectStart":"'+t[n].redirectStart+'"',e+=',"initiatorType":"'+t[n].initiatorType+'"',e+=',"duration":"'+t[n].duration+'"',e+=',"startTime":"'+t[n].startTime+'"',e+=',"entryType":"'+t[n].entryType+'"',e+=',"name":"'+encodeURIComponent(t[n].name)+'"',n===t.length-1?e+="}]":e+="},{";return e},P=function t(){tu({PerformanceData:I(),URL:document.URL,SessionKey:w("DC_CONTEXTID")},function(){})},R=function(){var t=e(function(t){return c(this,function(e){switch(e.label){case 0:return[4,tu({activityStream:JSON.parse(L()),url:w("activitystreamURL")},function(){},p.ActivityStream)];case 1:e.sent(),t();return[2]}})});return function e(e){return t.apply(this,arguments)}}(),L=function t(){var t=w("activitystream");t=JSON.parse(t);for(var e=0,n=0,i=0,o=0,a="[",s,c=0;c<t.length;c++)if(c>0&&t[c].element===t[c-1].element){var l=new Date(t[c].time),u=new Date(t[c-1].time);e=e+(l.getTime()-u.getTime()),t[c].action==="keydown"&&n++,t[c].action==="click"&&i++}else{if(c>0){var l=new Date(t[c].time),u=new Date(t[c-1].time);e=e+(l.getTime()-u.getTime()),e>0&&(o=Math.round((n/e*60*1e3+1e-5)*100)/100),!o&&o!=0&&(r.push({logLevel:0,logMsg:"DC: KPM: "+o,time:new Date}),o=0),s+=',"duration":"'+e+'"',s+=',"kpm":"'+o+'"',s+=',"keystrokes":"'+n+'"',s+=',"clicks":"'+i+'"',t[c-1].action=="blur"&&c>1&&t[c-2].action=="tab"?s+=',"lastAction":"'+t[c-2].action+'"':s+=',"lastAction":"'+t[c-1].action+'"',a+=s+"}",o=0,n=0,i=0}t[c].action==="keydown"&&n++,t[c].action==="click"&&i++,s=c!=0?",{":"{",s+='"element":"'+t[c].element+'"',s+=',"time":"'+t[c].time+'"',s+=',"firstAction":"'+t[c].action+'"',t[c].UserEventTypeCD!=""&&(s+=',"UserEventTypeCD":"'+t[c].UserEventTypeCD+'"'),e=0}return c>0&&(c==1&&!e&&(td.flushInterval!==void 0?e=td.flushInterval:e=0),e>0&&n>0&&(o=Math.round((n/e*60*1e3+1e-5)*100)/100),!o&&o!=0&&(r.push({logLevel:0,logMsg:"DC: KPM: "+o,time:new Date}),o=0),s+=',"duration":"'+e+'"',s+=',"kpm":"'+o+'"',s+=',"keystrokes":"'+n+'"',s+=',"clicks":"'+i+'"',s+=',"lastAction":"'+t[c-1].action+'"',s+="}"),a+=s+"]",a},J=function t(){for(var t=JSON.parse(w("eventsStream")),e=Array(),n=function(t,e,n){return{UserEventTypeCD:t,Time:e,Duration:n}},r=0;r<t.length;r++)if(t[r].type=="Enter"){var i=n(t[r].event,t[r].time,0);e.push(i);for(var o=0;o<t.length;o++)if(t[o].type=="Exit"&&t[r].event==t[o].event){var a=n(t[o].event+1,t[o].time,new Date(t[o].time).getTime()-new Date(t[r].time).getTime());e.push(a);break}}else if(t[r].type=="Simple"){var i=n(t[r].event,t[r].time,0);e.push(i)}return e},X=function(){var t=e(function(t){return c(this,function(e){switch(e.label){case 0:return[4,tu(J(),function(){},p.UserEvents)];case 1:e.sent(),t();return[2]}})});return function e(e){return t.apply(this,arguments)}}(),F=function t(t){t==="activity"?(f!==null&&(f.length=0),_("activitystream"),_("activitystreamURL")):_("eventsStream")},k=function t(t){m("DC_CONTEXTID",t)},j=function t(t){to("Heard Click");var e={};e.element=b(t.target),e.x=t.clientX,e.y=t.clientY,e.time=new Date,e.action="click",e.UserEventTypeCD=n.activeEvent,f.push(e),z(JSON.stringify(f)),G(),td.timerRunning||td.startTimer()},x=function t(t){var e={};e.element=b(t.target),e.time=new Date,e.action="focus",e.UserEventTypeCD=n.activeEvent,f.push(e)},U=function t(t){var e={};e.element=b(t.target),e.time=new Date,e.action="blur",e.UserEventTypeCD=n.activeEvent,f.push(e),G(),td.enabled||td.startTimer()},Y=function t(t){to("Heard Keydown");var e={};e.element=b(t.target),e.time=new Date,t.which=t.which||t.keyCode,t.which==9?e.action="tab":e.action="keydown",e.UserEventTypeCD=n.activeEvent,f.push(e),z(JSON.stringify(f)),td.timerRunning||td.startTimer()},K=function t(t){to("Heard Pointerdown");var e={};e.element=b(t.target),e.time=new Date,e.action=t.type,e.type=t.pointerType,e.x=t.x,e.y=t.y,e.UserEventTypeCD=n.activeEvent,f.push(e),z(JSON.stringify(f)),td.timerRunning||td.startTimer()},B=function t(t){to("Heard Pointerup");var e={};e.element=b(t.target),e.time=new Date,e.action=t.type,e.type=t.pointerType,e.x=t.x,e.y=t.y,e.UserEventTypeCD=n.activeEvent,f.push(e),z(JSON.stringify(f)),td.timerRunning||td.startTimer()},H=function t(){m("activitystream",JSON.stringify(f)),m("activitystreamURL",document.URL)},W=function t(){var t=window.VestaDataCollectorJS.v1,e=S(p.UserEvents),n=S(p.ActivityStream);if(!((e===null||e===void 0?void 0:e.enabled)&&(n===null||n===void 0?void 0:n.enabled)))return;document.attachEvent?document.attachEvent("onclick",j):document.addEventListener("click",j),document.activeElement&&document.activeElement.addEventListener("keydown",Y),document.activeElement.addEventListener("pointerdown",K),document.activeElement.addEventListener("pointerup",B),window.onkeyup=r;function r(t){a.length>0?(t.which=t.which||t.keyCode,t.which==13&&G()):td.timerRunning||td.startTimer()}window.onbeforeunload=function(t){if(to("window onbeforeunload"),!td.enabled&&(G(),A()))return""}},z=function t(t){window.__VestaDebug&&typeof window.__VestaDebug=="function"&&window.__VestaDebug(t)},G=function t(){to("Flush ActivityStream"),H(),C("eventsStream")&&(z(w("eventsStream")),X(function(){F("events")})),C("activitystream")&&(z(w("activitystream")),R(function(){F("activity")}))},M=function t(){var t;v||!((t=S(p.Fingerprint))===null||t===void 0?void 0:t.enabled)||FingerprintJSFree.load().then(function(t){try{t.get().then(function(t){to("Fingerprint callback at requestIdleCallback "+t),Z(t)})}catch(t){(typeof window==="undefined"?"undefined":s(window))<"u"&&typeof define=="function"&&define.amd||r.push({logLevel:0,logMsg:"DC: Error calling Fingerprint at requestIdleCallback: "+t,time:new Date})}})},q=function(){var t=e(function(t){var e,n,r;return c(this,function(i){switch(i.label){case 0:if(!((e=S(p.FingerprintPro))===null||e===void 0?void 0:e.enabled))return[2,Promise.resolve()];return[4,FingerprintJS.load()];case 1:return[4,i.sent().get({tag:{SessionKey:t}})];case 2:n=i.sent();r=n;if(!r)return[3,4];return[4,Q(n)];case 3:r=(i.sent(),localStorage[g.VNEXT_DC_FPJSPRO_CALLED]=t);i.label=4;case 4:return[2,(r,Promise.resolve())]}})});return function e(e){return t.apply(this,arguments)}}(),Z=function t(t){tu({browserFingerprint:t.visitorId||t,jsVersion:t.version||""},function(t){switch(t.ResponseCode){case 0:v=!0;break;case 602:h++<2&&M();break}},p.Fingerprint)},Q=function(){var t=e(function(t){var e;return c(this,function(n){return[2,tf({visitorID:t.visitorId,visitorResponse:t.visitorFound,requestID:t.requestId,jsVersion:((e=t.meta)===null||e===void 0?void 0:e.version)||""},function(){},p.FingerprintPro)]})});return function e(e){return t.apply(this,arguments)}}(),$=function e(){var e=function e(){if(t.urlExclusionList==null||t.urlExclusionList=="undefined"||t.urlExclusionList=="null"||t.urlExclusionList=="")return!1;var e=document.URL;try{for(var n=t.urlExclusionList.split(","),r=0;r<n.length;r++){var i=n[r];if(e.match(i))return!0}}catch(t){return!1}return!1};return!e()};function tt(){var t=window.VestaDataCollectorJS.v1;var e=document.createElement("img");e.style="display:none",e.src="https://accounts.google.com/CheckCookie?continue=https%3A%2F%2Fwww.google.com%2Fintl%2Fen%2Fimages%2Flogos%2Faccounts_logo.png&followup=https%3A%2F%2Fwww.google.com%2Fintl%2Fen%2Fimages%2Flogos%2Faccounts_logo.png&chtml=LoginDoneHtml&checkedDomains=youtube&checkConnection=youtube%3A291%3A1",e.onload=function(){t.socialStatus("GoogleStatus",!0)},e.onerror=function(){t.socialStatus("GoogleStatus",!1)},document.body.appendChild(e);var n=document.createElement("img");n.style="display:none",n.src="https://twitter.com/login?redirect_after_login=%2Ffavicon.ico",n.onload=function(){t.socialStatus("TwitterStatus",!0)},n.onerror=function(){t.socialStatus("TwitterStatus",!1)},document.body.appendChild(n),function(t,e,n){var r,i=t.getElementsByTagName(e)[0];t.getElementById(n)||(r=t.createElement(e),r.id=n,r.src="https://connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(r,i))}(document,"script","facebook-jssdk")}var te=function t(t,e){o[t]=e,o.socialCount++,o.socialCount==3&&(tn(),o.socialCount=0)},tn=function t(){tu(o,function(){},p.SocialData)};window.fbAsyncInit=function(){FB.init({appId:"941008879243673",autoLogAppEvents:!0,status:!0,xfbml:!0,version:"v2.10"}),FB.AppEvents.logPageView(),FB.getLoginStatus(function(t){t.status==="not_authorized"||t.status==="connected"?te("FacebookStatus",!0):te("FacebookStatus",!1)})};var tr=function t(){to("get userInfo");var t=!!navigator.cookieEnabled,e="";screen.width&&(width=screen.width?screen.width:"",height=screen.height?screen.height:"",e+=""+width+" x "+height);var n=navigator.appVersion?navigator.appVersion:"",r,o,a,s=window.navigator.userAgent?window.navigator.userAgent:"";window.navigator.userAgent.indexOf("Windows NT 6.2")!=-1&&(s="Windows 8"),window.navigator.userAgent.indexOf("Windows NT 6.1")!=-1&&(s="Windows 7"),window.navigator.userAgent.indexOf("Windows NT 6.0")!=-1&&(s="Windows Vista"),window.navigator.userAgent.indexOf("Windows NT 5.1")!=-1&&(s="Windows XP"),window.navigator.userAgent.indexOf("Windows NT 5.0")!=-1&&(s="Windows 2000"),window.navigator.userAgent.indexOf("Mac")!=-1&&(s="Mac/iOS"),window.navigator.userAgent.indexOf("X11")!=-1&&(s="UNIX"),window.navigator.userAgent.indexOf("Linux")!=-1&&(s="Linux"),i.BrowserName=l,i.FullVersion=u,i.AppName=navigator.appName?navigator.appName:"",i.UserAgent=navigator.userAgent?navigator.userAgent:"",i.OSName=s,i.ScreenSize=e,i.CookieEnabled=t,i.Language=navigator.language?navigator.language:"",i.ColorDepth=screen.colorDepth?screen.colorDepth:"",i.CPUClass=navigator.cpuClass?navigator.cpuClass:"",i.TimeZoneOffset=new Date().getTimezoneOffset()},ti=function t(){i.SessionKey=w("DC_CONTEXTID"),i.URL=document.URL,tu(i,function(){},p.UserData)},to=function t(t){w("logLevel")=="2"&&r.push({logLevel:2,logMsg:"DC: "+t,time:new Date})},ta=function t(){to("initialize"),v||M()},ts=function e(e){to("require_initialize"),W(),t.fingerprintEnabled&&Z(e)},tc=function t(t,e){to("init"),V(),tt(),k(e),tr(),ti(),W(),A()&&!td.enabled&&tv(6)},tl=function t(t){V(),a=t},tu=function(){var t=e(function(t,e,n){var r;return c(this,function(i){switch(i.label){case 0:tC(n,Object.assign({},t));if(!n)return[3,2];return[4,T(n,t,e)];case 1:r=i.sent();return[3,3];case 2:r=Promise.resolve();i.label=3;case 3:return[2,r]}})});return function e(e,n,r){return t.apply(this,arguments)}}(),tf=function(){var t=e(function(t,e,n){var r;return c(this,function(i){switch(i.label){case 0:tC(n,Object.assign({},t));if(!n)return[3,2];return[4,T(n,t,e)];case 1:r=i.sent();return[3,3];case 2:r=Promise.resolve();i.label=3;case 3:return[2,r]}})});return function e(e,n,r){return t.apply(this,arguments)}}(),td={};td.timerRunning=!1,td.enabled=!1,td.startTimer=function(){td.enabled&&(td.timerRunning||(td.timerRunning=!0,td.timer=window.setInterval(function(){G()},td.flushInterval)))};var tv=function t(){if(arguments.length!=0)if(isNaN(parseInt(arguments[0]))){td.enabled=!1;return}else{var t=parseInt(arguments[0]);if(t<=0)return;td.flushInterval=t*1e3,td.enabled=!0}else td.flushInterval=10*1e3,td.enabled=!0},tg=function t(){m("logData",JSON.stringify(r))};function tp(){r!=null&&(r.length=0),_("logData")}var th=function t(){var t=w("logData");t=JSON.parse(t);for(var e="[",n,r=0;r<t.length;r++)r==0?n="{":n=",{",n+='"logLevel":"'+t[r].logLevel+'"',n+=',"logMsg":"'+t[r].logMsg+'"',n+=',"time":"'+t[r].time+'"',e+=n+"}";return e+="]",e},tD=function t(){tu({LogData:th(),SessionKey:w("DC_CONTEXTID")},function(){},p.LogData)},tE=function t(){tg(),C("logData")&&tD(),tp()},tm={};tm.enabled=!1,tm.startTimer=function(){!tm.enabled||w("logLevel")=="3"||setInterval(function(){tE()},1e3)};var tw=function t(t){if(t!=null)try{m("logLevel",t),tm.enabled=!0,tm.startTimer()}catch(t){tm.enabled=!1;return}else tm.enabled=!1},tC=function t(t,e){var n=t_(t);if(n=="InsertActivityStream"){e.ActivityStreamData=e.ActivityStreamData.replaceAll("}{","},{");var r=JSON.parse(e.ActivityStreamData);d.push({ActivityStreamData:r})}else d.push(e)},tS=function t(){return activityStream},t_=function t(t){var e=t.lastIndexOf("/"),n=t.substring(e+1,t.length);return n};return{init:tc,registerSender:tl,enableAutoFlush:tv,logLevel:tw,userMapping:D,fingerprintEnabled:!1,getFP:ts,callFPP:$,getFingerprintPro:q,getFingerprint:M,socialStatus:te,getDataHistory:tS,pushDataHistory:tC}}var z={loaded:"NuData loaded and enabled for client: ",init:"NuData initialized with client: ",unauthorized:"NuData authorization denied.",error:"NuData internal server error.",nuDataDisabled:"NuData is disabled for this customer."},G=z;function M(){var t=V(),n=E.BROWSER_LOCATION_API,r=function(t){var e,n,r,i,o,a;return{enabled:(e=t.nuData)===null||e===void 0?void 0:e.enabled,clientId:(n=t.nuData)===null||n===void 0?void 0:n.clientId,sessionId:(r=t.nuData)===null||r===void 0?void 0:r.sessionId,clientBaseUrl:(i=t.nuData)===null||i===void 0?void 0:i.clientBaseUrl,placementConfig:((o=t.nuData)===null||o===void 0?void 0:o.placementConfig)?(a=t.nuData)===null||a===void 0?void 0:a.placementConfig:void 0}},o=function(t,e,n,i,o,a,s,c){var l=window.VestaDataCollectorJS.config,u=r(l.configFlags);localStorage[g.VNEXT_DC_NUDATA_LOADED]="false",c=t.ndsapi||(t.ndsapi={}),c.config={q:[],ready:function t(t){this.q.push(t)}},a=e.createElement(n),s=e.getElementsByTagName(n)[0],a.src=i,s.parentNode.insertBefore(a,s),a.onload=function t(){c.load(i),localStorage[g.VNEXT_DC_NUDATA_LOADED]="true"},c.config.ready(function(){c.setSessionId(u.sessionId),c.setPlacement(u.placementConfig.placementPageName.javaScript),c.setPlacementPage(u.placementConfig.placementPageNumber.javaScript)})},s=function(){var e=window.VestaDataCollectorJS.config,n=r(e.configFlags);if(!n.enabled){t.log(function(){return console.warn(G.nuDataDisabled)});return}if(n.enabled&&(n.clientId||n.clientId.length>0)&&(n.clientBaseUrl||n.clientBaseUrl.length>0)){t.log(function(){return console.log(G.loaded,n.clientId)}),document.getElementById(n.clientId+"nuData")&&document.getElementById(n.clientId+"nuData").remove();var i="".concat(n.clientBaseUrl,"/2.2/w/").concat(n.clientId,"/sync/js/"),a=document.createElement("form");a.setAttribute("id",n.clientId+"nuData"),document.body.appendChild(a),function(t,e,n,r,i,a,s,c){o(t,e,n,r,i,a,s,c)}(window,document,"script",i)}else t.log(function(){return console.warn(G.nuDataDisabled)})},l=function(){var t=e(function(t){var e,n,i,o,a,s,l;return c(this,function(c){switch(c.label){case 0:a=r(t.configFlags),s=document.getElementById(a.clientId+"nuData")[0].value;return[4,j()];case 1:l=c.sent();return[2,{sessionId:a.sessionId,source:"JavaScript",widgetData:s,remoteIp:l,RequestUrl:window.location.href,placementPageFlowName:a===null||a===void 0?void 0:(n=a.placementConfig)===null||n===void 0?void 0:(e=n.placementPageName)===null||e===void 0?void 0:e.javaScript,placementPageNumber:a===null||a===void 0?void 0:(o=a.placementConfig)===null||o===void 0?void 0:(i=o.placementPageNumber)===null||i===void 0?void 0:i.javaScript,url:""}]}})});return function e(e){return t.apply(this,arguments)}}();return{initializeNuData:s,sendNuData:function(){var t=e(function(t){var n,i,o;return c(this,function(a){switch(a.label){case 0:n=window.VestaDataCollectorJS.config;if(!r(n.configFlags).enabled)return[3,5];return[4,l(n)];case 1:i=a.sent();localStorage[g.VNEXT_DC_NUDATA_CALLED]=t;a.label=2;case 2:a.trys.push([2,4,,5]);return[4,m(/*#__PURE__*/e(function(){var t,e;return c(this,function(n){switch(n.label){case 0:return[4,w("".concat(E.GATEWAY,"/js/dc/send-nudata"),{method:"POST",headers:{"Content-Type":"application/json",RemoteIp:i.remoteIp,RequestUrl:window.location.href,TransactionId:(e=window.VestaDataCollectorJS)===null||e===void 0?void 0:(t=e.config)===null||t===void 0?void 0:t.sessionId},body:JSON.stringify(i)})];case 1:return[2,n.sent()]}})}))];case 3:return[2,a.sent()];case 4:o=a.sent();return[2,Promise.reject(o)];case 5:return[2]}})});return function(e){return t.apply(this,arguments)}}(),refactorNuDataInitiateResponse:function(t){var e,n,r,o;return a(i({},(n=t.configuration)===null||n===void 0?void 0:(e=n.dataCollector)===null||e===void 0?void 0:e.flags),{nuData:a(i({},(o=t.configuration)===null||o===void 0?void 0:(r=o.dataCollector)===null||r===void 0?void 0:r.flags.nuData),{sessionId:t.transactionSessionId})})}}}var q=[29,31,32,33,34,35,36,37,38,39,40];function Z(){var t="",e=q,n=function t(t){var e=a();e.push(t),r(e)},r=function t(t){u("eventsStream",JSON.stringify(t))},i=function e(e){s(e)||(t=e);var r={event:e,time:new Date,type:s(e)?"Simple":"Enter"};n(r)},o=function e(e){if(s(e)){console.log("Data Collector events: this is a logic event, it can't be finished.");return}for(var r=a(),i=0;i<r.length;i++)if(r[i].event==e&&r[i].type=="Exit"){r[i].time=new Date;return}var o={event:e,time:new Date,type:"Exit"};t="",n(o)},a=function t(){var t=new Array;if(l("eventsStream")){var e=c("eventsStream");t=JSON.parse(e)}return t},s=function t(t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1},c=function t(t){for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1);if(i.indexOf(e)==0)return i.substring(e.length,i.length)}return""},l=function t(t){var e=c(t);return!!(e&&e!="null"&&e.length>2)},u=function t(t,e){e&&e!="null"&&(document.cookie=t+"="+e+";")};return{startEvent:i,finishEvent:o,activeEvent:t}}var Q=function(){return{retry:/*#__PURE__*/e(function(){var t,n,r;return c(this,function(i){switch(i.label){case 0:return[4,m(/*#__PURE__*/e(function(){return c(this,function(t){switch(t.label){case 0:return[4,w("".concat(E.GATEWAY,"/js/dc/test/error"),{method:d.POST,headers:{Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,t.sent()]}})}))];case 1:t=i.sent();console.log(t);if(!(t.status===200))return[3,3];r={};return[4,t.json()];case 2:n=(r.data=i.sent(),r.status=t.status,r);return[3,4];case 3:n={status:t.status,data:{}};i.label=4;case 4:return[2,n]}})}),abort:/*#__PURE__*/e(function(){var t,n,r;return c(this,function(i){switch(i.label){case 0:return[4,m(/*#__PURE__*/e(function(){return c(this,function(t){switch(t.label){case 0:return[4,w("".concat(E.GATEWAY,"/js/dc/test/stall"),{method:d.POST,headers:{Accept:"application/json","Content-Type":"application/json"}})];case 1:return[2,t.sent()]}})}))];case 1:t=i.sent();console.log(t);if(!(t.status===200))return[3,3];r={};return[4,t.json()];case 2:n=(r.data=i.sent(),r.status=t.status,r);return[3,4];case 3:n={status:t.status,data:{}};i.label=4;case 4:return[2,n]}})})}},$=Q;e(function(){var t,n,r,o,s,u,f,d,p,h,D,E,m;return c(this,function(w){t=V(),n=function(){var t=e(function(t,e){var n,r,i,o;var a=arguments;return c(this,function(s){switch(s.label){case 0:n=a.length>2&&a[2]!==void 0?a[2]:v.VNEXT_DC_SANDBOX||v.VNEXT_DC_PRODUCTION,r=a.length>3?a[3]:void 0;if(K(n))return[2];i=btoa("".concat(t,":").concat(e));return[4,window.VestaDataCollectorJS.initiateSession(i,n)];case 1:o=s.sent();return[2,R(o,r)]}})});return function e(e,n){return t.apply(this,arguments)}}(),r=function(){var t=e(function(t,e){var n,r,i,o,a;var s=arguments;return c(this,function(c){switch(c.label){case 0:n=s.length>2&&s[2]!==void 0?s[2]:v.VNEXT_DC_SANDBOX||v.VNEXT_DC_PRODUCTION,r=s.length>3?s[3]:void 0,i=s.length>4?s[4]:void 0;if(K(n)||B(r))return[2];o=btoa("".concat(t,":").concat(e));return[4,window.VestaDataCollectorJS.initiateSession(o,n,r)];case 1:a=c.sent();return[2,R(a,i)]}})});return function e(e,n){return t.apply(this,arguments)}}(),o=function(){var t=e(function(t,e,n){var r;return c(this,function(i){switch(i.label){case 0:if(K(e))return[2];return[4,window.VestaDataCollectorJS.initiateSessionWithToken(t,e)];case 1:r=i.sent();return[2,R(r,n)]}})});return function e(e,n,r){return t.apply(this,arguments)}}(),s=function(){var t=e(function(t,e,n,r){var i;return c(this,function(o){switch(o.label){case 0:if(K(e)||B(n))return[2];return[4,window.VestaDataCollectorJS.initiateSessionWithToken(t,e,n)];case 1:i=o.sent();return[2,R(i,r)]}})});return function e(e,n,r,i){return t.apply(this,arguments)}}(),u=function(){var n=e(function(e,n,r,o,s){return c(this,function(c){if(!e.clientName&&!e.sessionId){t.log(function(){return console.error(N.unauthorized)});return[2]}return[2,(window.VestaDataCollectorJS.config=i(a(i({},window.VestaDataCollectorJS.config),{clientName:e.clientName,sessionId:e.sessionId,configFlags:n,featureFlags:r,baseEndpoints:s}),o),window.VestaDataCollectorJS.v1.init(window.VestaDataCollectorJS.config.clientName,window.VestaDataCollectorJS.config.sessionId),L(window.VestaDataCollectorJS.config.sessionId,window.VestaDataCollectorJS.config.clientName),window.VestaDataCollectorJS.config)]})});return function t(t,e,r,i,o){return n.apply(this,arguments)}}(),f=function(e){try{var n=g.VNEXT_DC_ACTIVATE_CACHE_KEY_SPLITTER,r=atob(localStorage[g.VNEXT_DC_ACTIVATE_CACHE_KEY]);if(e&&e!=r.split(n)[0])throw 0;var i=(e||r.split(n)[0]).toString(),o=r.split(n)[1],a=JSON.parse(r.split(n)[2]||"{}"),s=JSON.parse(r.split(n)[3]||"[]");return window.VestaDataCollectorJS.initialize({clientName:o||"",sessionId:i},a,s),Promise.resolve(i)}catch(e){return t.log(function(){return console.error(N.cannotResume)}),Promise.reject()}},d=function(){_(),localStorage.removeItem(g.VNEXT_DC_ACTIVATE_CACHE_KEY),localStorage.removeItem(g.VNEXT_DC_FPJSPRO_LOADED),localStorage.removeItem(g.VNEXT_DC_FPJSPRO_CALLED),localStorage.removeItem(g.VNEXT_DC_NUDATA_LOADED),localStorage.removeItem(g.VNEXT_DC_NUDATA_CALLED)},p=function(){var n=e(function(){var n,r,i,o,a,s,l,u,f,d,v,h,D,E,m;var w=arguments;return c(this,function(C){switch(C.label){case 0:n=w.length>0&&w[0]!==void 0?w[0]:0;a=localStorage[g.VNEXT_DC_FPJSPRO_LOADED],s=localStorage[g.VNEXT_DC_FPJSPRO_CALLED],l=(i=window.VestaDataCollectorJS.config)===null||i===void 0?void 0:(r=i.configFlags)===null||r===void 0?void 0:r.fppenabled,u=(o=window.VestaDataCollectorJS.config.configFlags)===null||o===void 0?void 0:o.nuData,f=localStorage[g.VNEXT_DC_NUDATA_LOADED],d=localStorage[g.VNEXT_DC_NUDATA_CALLED],v=u===null||u===void 0?void 0:u.enabled,h=window.VestaDataCollectorJS.config.sessionId,D=[];if(!((l&&a!=="true"||v&&f!=="true")&&n<=3))return[3,1];E=new Promise(function(){var t=e(function(t){return c(this,function(r){setTimeout(/*#__PURE__*/e(function(){return c(this,function(e){switch(e.label){case 0:return[4,p(n?n+1:1)];case 1:return[2,(e.sent(),t())]}})}),1e3);return[2]})});return function(e){return t.apply(this,arguments)}}());return[3,5];case 1:if(!h)return[3,3];t.log(function(){return console.log(N.initializeCheckout)}),D.push(new Promise(function(){var t=e(function(t){return c(this,function(e){switch(e.label){case 0:return[4,y()];case 1:return[2,(e.sent(),t())]}})});return function(e){return t.apply(this,arguments)}}())),f==="true"&&d!==h&&D.push(new Promise(function(){var t=e(function(t){return c(this,function(e){switch(e.label){case 0:return[4,window.VestaDataCollectorJS.nuData.sendNuData(h)];case 1:return[2,(e.sent(),t())]}})});return function(e){return t.apply(this,arguments)}}())),a==="true"&&s!==h&&D.push(new Promise(function(){var t=e(function(t){return c(this,function(e){switch(e.label){case 0:return[4,window.VestaDataCollectorJS.v1.getFingerprintPro(h)];case 1:return[2,(e.sent(),t())]}})});return function(e){return t.apply(this,arguments)}}()));return[4,Promise.allSettled(D)];case 2:m=(C.sent(),Promise.resolve());return[3,4];case 3:m=(t.log(function(){return console.warn(N.cannotCheckout)}),Promise.resolve());C.label=4;case 4:E=m;C.label=5;case 5:return[2,E]}})});return function t(){return n.apply(this,arguments)}}(),h=function(){var t=e(function(){var t,e,n;var r=arguments;return c(this,function(i){switch(i.label){case 0:for(t=r.length,e=new Array(t),n=0;n<t;n++){e[n]=r[n]}return[4,p.apply(null,e)];case 1:return[2,i.sent()]}})});return function e(){return t.apply(this,arguments)}}(),D=function(){var t=e(function(){var t,e,n;var r=arguments;return c(this,function(i){switch(i.label){case 0:for(t=r.length,e=new Array(t),n=0;n<t;n++){e[n]=r[n]}return[4,o.apply(null,e)];case 1:return[2,i.sent()]}})});return function e(){return t.apply(this,arguments)}}(),E=function(){var t=e(function(){var t,e,r;var i=arguments;return c(this,function(o){switch(o.label){case 0:for(t=i.length,e=new Array(t),r=0;r<t;r++){e[r]=i[r]}return[4,n.apply(null,e)];case 1:return[2,o.sent()]}})});return function e(){return t.apply(this,arguments)}}(),m=H();window.VestaDataCollector={initiate:o,initiateWithCredentials:n,initiateCP:s,initiateCPWithCredentials:r,resume:f,finalize:p,clear:d,debug:{enableConsole:t.enable,disableConsole:t.disable},initializeCheckout:h,activateWithToken:D,activate:E},window.VestaDataCollectorJS={config:new l,initialized:!1,initialize:u,finalize:p,clear:d,initiateSession:x,initiateSessionWithToken:U,refreshSession:Y,getStorages:m.getStorages,getHistory:m.getHistory,getLocation:m.getLocation,collect:X,pollStart:F,pollStop:k,v1:null,events:null,nuData:M(),debug:{getDocuments:b,enableConsole:t.enable,disableConsole:t.disable,test:$()}},window.VestaDataCollectorJS.events=Z(),window.VestaDataCollectorJS.v1=W(),window.VestaJSDataCollector=window.VestaDataCollectorJS,t.log(function(){return console.log(N.loaded)});return[2]})})();})();